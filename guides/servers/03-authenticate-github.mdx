---
title: "GitHub authentication"
description: "Add the server's public key to GitHub so the server can push and pull repositories."
sidebarTitle: "3. Authenticate GitHub"
icon: "github"
---

Add the server's public SSH key to your GitHub account so the server can clone, push, and pull repositories without a password. Once configured, the server can push deploys and pull updates without manual credential entry.

<Info>
**Time estimate:** ~15 minutes. **Result:** The server can authenticate with GitHub and access your repositories.
</Info>

## Prerequisites

- **A2 Server initial configuration** done: you have the server's public key from `cat ~/.ssh/server_github_key.pub`
- A GitHub account

<Steps>
  <Step title="Copy the public key">
    1. If the terminal from A2 is still open, the key output is there. Otherwise, on the server run:
    2. Run `cat ~/.ssh/server_github_key.pub` and copy the entire line.
    3. The line starts with `ssh-ed25519` and ends with a date stamp comment.

    ```bash
    cat ~/.ssh/server_github_key.pub
    ```

    ```
    ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIexample... server@yourdomain.com
    # Expected: one line starting with ssh-ed25519, ending with comment
    ```

    <Danger>Never share or commit the **private** key (`server_github_key`). Only the `.pub` file goes to GitHub.</Danger>

    <Check>Public key copied to clipboard.</Check>
  </Step>

  <Step title="Navigate to GitHub SSH settings">
    1. In a browser, go to [github.com](https://github.com) and sign in.
    2. Click your profile picture (top right) → **Settings**.
    3. In the left sidebar, click **SSH and GPG keys**.
    4. You'll see existing keys listed (if any).

    <Note>Bookmark this page if you add SSH keys across multiple servers.</Note>
  </Step>

  <Step title="Add new SSH key">
    1. Click **New SSH key** (green button).
    2. Fill in the form:
       - **Title:** e.g. `Production Server - your-project` (use a descriptive name to identify which server)
       - **Key type:** Authentication Key (default)
       - **Key:** paste the public key (should start with `ssh-ed25519`)
    3. Click **Add SSH key**. GitHub may prompt for your password.

    <Check>Key appears listed with title, fingerprint, and "Just now".</Check>

    <Warning>This adds the key to your GitHub **account** (not a specific repo). The server can clone any of your repos and push where you have write access.</Warning>
  </Step>

  <Step title="Test GitHub connection">
    1. On the server (VSCode terminal), run the connection test.
    2. Verify the success message shows your GitHub username.

    <CodeGroup>
    ```bash Basic test
    ssh -T git@github.com
    # Expected: Hi your-username! You've successfully authenticated, but GitHub does not provide shell access.
    ```

    ```bash Verbose (debug)
    ssh -Tv git@github.com
    # Expected: Look for "Offering public key", "Server accepts key", "Hi your-username!" in output
    ```
    </CodeGroup>

    <Note>"No shell access" is expected — GitHub does not allow SSH shells. "Successfully authenticated" means the key works.</Note>

    <Check>GitHub authentication working.</Check>
  </Step>

  <Step title="Configure Git identity on server">
    1. Set the global user email and name.
    2. Verify the configuration.

    ```bash
    git config --global user.email "server@yourdomain.com"
    git config --global user.name "Server"
    # Replace "Server" with your name if preferred
    ```

    ```bash
    git config --global --list
    ```

    ```
    user.email=server@yourdomain.com
    user.name=Server
    # Expected: your email and name appear in the list
    ```

    <Check>Git configured with identity.</Check>
  </Step>

  <Step title="Test clone (optional)">
    1. Clone a test repository.
    2. If successful, remove the test clone.

    ```bash
    cd /tmp && git clone git@github.com:your-username/some-repo.git
    ```

    ```
    Cloning into 'some-repo'...
    # Expected: clone completes without permission errors
    ```

    ```bash
    rm -rf /tmp/some-repo
    # Clean up after verifying clone succeeded
    ```

    <Tip>You can use any public repo you have access to for the test clone.</Tip>
  </Step>
</Steps>

## Understanding GitHub SSH key types

<AccordionGroup>
  <Accordion title="Authentication keys (what you just added)">
    Used for server-level operations. Access all your repos. Set up in Part A of the server setup flow.
  </Accordion>
  <Accordion title="Deploy keys (different)">
    Single-repo access only. Set up per project in Part B. Better security and access control for production deploys.
  </Accordion>
</AccordionGroup>

<Tip>Part A uses authentication keys for general server operations. Part B uses deploy keys per project for tighter access control.</Tip>

## Verification checklist

- [ ] Public key added to GitHub (full line including `ssh-ed25519` prefix)
- [ ] Key visible in Settings → SSH and GPG keys with correct title
- [ ] `ssh -T git@github.com` returns success
- [ ] Message shows your GitHub username (not another account)
- [ ] Git configured with `user.email` and `user.name`
- [ ] (Optional) Successfully cloned a test repository to `/tmp`

When all items pass, the server is ready for Admin-Server setup.

## Troubleshooting

<AccordionGroup>
  <Accordion title="Permission denied (publickey)">
    - Verify the key was added correctly in GitHub Settings → SSH and GPG keys
    - Check SSH config on server: `cat ~/.ssh/config | grep -A 5 "Host github.com"`
    - Confirm key file exists: `ls -la ~/.ssh/server_github_key`
    - Test with explicit key: `ssh -i ~/.ssh/server_github_key -T git@github.com`
  </Accordion>
  <Accordion title="Host key verification failed">
    Add GitHub's host key: `ssh-keyscan github.com >> ~/.ssh/known_hosts`, then retry the connection test.
  </Accordion>
  <Accordion title="Wrong key being used">
    Ensure `IdentitiesOnly yes` in your SSH config for `Host github.com`. Edit with `nano ~/.ssh/config` and keep only the new entry if multiple keys exist.
  </Accordion>
  <Accordion title="SSH config not working">
    Check syntax: `cat ~/.ssh/config`. Verify indentation (spaces, no tabs). Test with explicit key: `ssh -i ~/.ssh/server_github_key -T git@github.com`.
  </Accordion>
</AccordionGroup>

## Next step

<Card title="4. Admin-server setup" icon="folder" href="/guides/servers/04-setup-admin">
  Create server-level Git repository and Admin-Server directory structure for scripts and config.
</Card>
